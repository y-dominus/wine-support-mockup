<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>„Ç´„Éº„Éà | „ÉØ„Ç§„Çµ„Éù - Sommia„Åå„Çµ„Éù„Éº„Éà„Åô„Çã„ÉØ„Ç§„É≥„Éû„Éç„Ç∏„É°„É≥„Éà„Ç∑„Çπ„ÉÜ„É†</title>
    <link rel="icon" href="../assets/images/favicon.ico">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/layout.css">
    <link rel="stylesheet" href="../css/components/buttons.css">
    <link rel="stylesheet" href="../css/components/ai_chat.css">
    <link rel="stylesheet" href="../css/components/cards.css">
    <link rel="stylesheet" href="../css/components/tables.css">
    <link rel="stylesheet" href="../css/components/forms.css">
    <link rel="stylesheet" href="../css/pages/my_cellar.css">
    <!-- Áµ±‰∏Ä„Åï„Çå„ÅüJavaScriptË™≠„ÅøËæº„Åø -->
    <script src="../js/unified_loader.js"></script>
    <script>
        console.log('üìÑ „Ç´„Éº„Éà„Éö„Éº„Ç∏Ë™≠„ÅøËæº„ÅøÈñãÂßã');
        initializeWineSupportPage('..');
    </script>
</head>
<body>

    
    <!-- „Éò„ÉÉ„ÉÄ„Éº„ÅØ common_parts.js „ÅßÂãïÁöÑÁîüÊàê -->
    
    <main>
        <div class="container">
            <div class="page-header">
                <h1>„Ç´„Éº„Éà</h1>
            </div>
            
            <div class="ai-message-container">
                <div id="ai-message-area" class="ai-message">
                    <!-- AI„É°„ÉÉ„Çª„Éº„Ç∏„Åå„Åì„Åì„Å´Ë°®Á§∫„Åï„Çå„Åæ„Åô -->
                    <img src="../sommia.png" alt="Sommia - „ÇΩ„É†„É™„Ç®AI" class="ai-avatar-small">
                    <span class="ai-text">Á¥†Êïµ„Å™„ÉØ„Ç§„É≥„Çí„ÅäÈÅ∏„Å≥„ÅÑ„Åü„Å†„Åç„Åæ„Åó„ÅüÔºÅ„ÅîÊ≥®ÊñáÂÜÖÂÆπ„ÇíÁ¢∫Ë™ç„Åó„Å¶„ÄÅ„ÅäÊâãÁ∂ö„Åç„ÇíÈÄ≤„ÇÅ„Åæ„Åó„Çá„ÅÜ„ÄÇ‰Ωï„Åã„ÅîË≥™Âïè„Åå„ÅÇ„Çå„Å∞„ÄÅ„ÅäÊ∞óËªΩ„Å´„ÅäÂ∞ã„Å≠„Åè„Å†„Åï„ÅÑ„Å≠„ÄÇ</span>
                </div>
            </div>
            
            <div class="cart-container">
                <div class="cart-items">
                    <table class="cart-table">
                        <thead>
                            <tr>
                                <th>ÂïÜÂìÅ</th>
                                <th>‰æ°Ê†º</th>
                                <th>Êï∞Èáè</th>
                                <th>Â∞èË®à</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="cart-row">
                                <td>
                                    <div class="cart-product">
                                        <div class="wine-color-tag red"></div>
                                        <div class="wine-bottle-placeholder">
                                            <div class="wine-bottle red">
                                                <div class="wine-label-text">„Ç≠„É£„É≥„ÉÜ„Ç£<br>„ÇØ„É©„Ç∑„Ç≥<br>„É™„Çº„É´„É¥„Ç°</div>
                                            </div>
                                        </div>
                                        <div class="cart-product-info">
                                            <div class="cart-product-name">„Ç≠„É£„É≥„ÉÜ„Ç£ „ÇØ„É©„Ç∑„Ç≥ „É™„Çº„É´„É¥„Ç°</div>
                                            <div class="cart-product-meta">„Ç§„Çø„É™„Ç¢ | Ëµ§„ÉØ„Ç§„É≥</div>
                                        </div>
                                    </div>
                                </td>
                                <td class="cart-price">¬•8,000</td>
                                <td>
                                    <div class="cart-quantity">
                                        <button class="cart-quantity-btn decrement">-</button>
                                        <input type="number" class="cart-quantity-input" value="1" min="1" max="99">
                                        <button class="cart-quantity-btn increment">+</button>
                                    </div>
                                </td>
                                <td class="cart-subtotal">¬•8,000</td>
                                <td>
                                    <button class="cart-remove-btn">&times;</button>
                                </td>
                            </tr>
                            <tr class="cart-row">
                                <td>
                                    <div class="cart-product">
                                        <div class="wine-color-tag white"></div>
                                        <div class="wine-bottle-placeholder">
                                            <div class="wine-bottle white">
                                                <div class="wine-label-text">„ÇΩ„Éº„É¥„Ç£„Éã„É®„É≥<br>„Éñ„É©„É≥</div>
                                            </div>
                                        </div>
                                        <div class="cart-product-info">
                                            <div class="cart-product-name">„ÇΩ„Éº„É¥„Ç£„Éã„É®„É≥„Éª„Éñ„É©„É≥</div>
                                            <div class="cart-product-meta">„Éã„É•„Éº„Ç∏„Éº„É©„É≥„Éâ | ÁôΩ„ÉØ„Ç§„É≥</div>
                                        </div>
                                    </div>
                                </td>
                                <td class="cart-price">¬•7,000</td>
                                <td>
                                    <div class="cart-quantity">
                                        <button class="cart-quantity-btn decrement">-</button>
                                        <input type="number" class="cart-quantity-input" value="1" min="1" max="99">
                                        <button class="cart-quantity-btn increment">+</button>
                                    </div>
                                </td>
                                <td class="cart-subtotal">¬•7,000</td>
                                <td>
                                    <button class="cart-remove-btn">&times;</button>
                                </td>
                            </tr>
                            <tr class="cart-row">
                                <td>
                                    <div class="cart-product">
                                        <div class="wine-color-tag white"></div>
                                        <div class="wine-bottle-placeholder">
                                            <div class="wine-bottle white">
                                                <div class="wine-label-text">„É¥„Çß„É´„É°„É≥„ÉÜ„Ç£„Éº„Éé<br>2023</div>
                                            </div>
                                        </div>
                                        <div class="cart-product-info">
                                            <div class="cart-product-name">„É¥„Çß„É´„É°„É≥„ÉÜ„Ç£„Éº„Éé 2023</div>
                                            <div class="cart-product-meta">„Ç§„Çø„É™„Ç¢„Éª„Çµ„É´„Éá„Éº„Éã„É£ | ÁôΩ„ÉØ„Ç§„É≥</div>
                                        </div>
                                    </div>
                                </td>
                                <td class="cart-price">¬•6,800</td>
                                <td>
                                    <div class="cart-quantity">
                                        <button class="cart-quantity-btn decrement">-</button>
                                        <input type="number" class="cart-quantity-input" value="6" min="1" max="99">
                                        <button class="cart-quantity-btn increment">+</button>
                                    </div>
                                </td>
                                <td class="cart-subtotal">¬•40,800</td>
                                <td>
                                    <button class="cart-remove-btn">&times;</button>
                                </td>
                            </tr>
                            <tr class="cart-row">
                                <td>
                                    <div class="cart-product">
                                        <div class="wine-color-tag red"></div>
                                        <div class="wine-bottle-placeholder">
                                            <div class="wine-bottle red">
                                                <div class="wine-label-text">„Çµ„É≥„Ç∏„Éß„É¥„Çß„Éº„Çº<br>2021</div>
                                            </div>
                                        </div>
                                        <div class="cart-product-info">
                                            <div class="cart-product-name">„Çµ„É≥„Ç∏„Éß„É¥„Çß„Éº„Çº 2021</div>
                                            <div class="cart-product-meta">„Ç§„Çø„É™„Ç¢„Éª„Éà„Çπ„Ç´„Éº„Éä | Ëµ§„ÉØ„Ç§„É≥</div>
                                        </div>
                                    </div>
                                </td>
                                <td class="cart-price">¬•5,200</td>
                                <td>
                                    <div class="cart-quantity">
                                        <button class="cart-quantity-btn decrement">-</button>
                                        <input type="number" class="cart-quantity-input" value="6" min="1" max="99">
                                        <button class="cart-quantity-btn increment">+</button>
                                    </div>
                                </td>
                                <td class="cart-subtotal">¬•31,200</td>
                                <td>
                                    <button class="cart-remove-btn">&times;</button>
                                </td>
                            </tr>
                            <tr class="cart-row">
                                <td>
                                    <div class="cart-product">
                                        <div class="wine-color-tag white"></div>
                                        <div class="wine-bottle-placeholder">
                                            <div class="wine-bottle white">
                                                <div class="wine-label-text">„Ç¢„É´„Éê„É™„Éº„Éã„Éß<br>2023</div>
                                            </div>
                                        </div>
                                        <div class="cart-product-info">
                                            <div class="cart-product-name">„Ç¢„É´„Éê„É™„Éº„Éã„Éß 2023</div>
                                            <div class="cart-product-meta">„Çπ„Éö„Ç§„É≥„Éª„É™„Ç¢„Çπ„Éª„Éê„Ç§„Ç∑„É£„Çπ | ÁôΩ„ÉØ„Ç§„É≥</div>
                                        </div>
                                    </div>
                                </td>
                                <td class="cart-price">¬•7,500</td>
                                <td>
                                    <div class="cart-quantity">
                                        <button class="cart-quantity-btn decrement">-</button>
                                        <input type="number" class="cart-quantity-input" value="4" min="1" max="99">
                                        <button class="cart-quantity-btn increment">+</button>
                                    </div>
                                </td>
                                <td class="cart-subtotal">¬•30,000</td>
                                <td>
                                    <button class="cart-remove-btn">&times;</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="cart-summary">
                    <div class="cart-summary-card">
                        <h3 class="cart-summary-title">Ê≥®Êñá„Çµ„Éû„É™„Éº</h3>
                        <div class="cart-summary-row">
                            <div class="cart-summary-label">Â∞èË®à</div>
                            <div class="cart-summary-value">¬•117,000</div>
                        </div>
                        <div class="cart-summary-row">
                            <div class="cart-summary-label">ÈÄÅÊñô</div>
                            <div class="cart-summary-value">¬•0</div>
                        </div>
                        <div class="cart-summary-row cart-summary-total">
                            <div class="cart-summary-label">ÂêàË®à</div>
                            <div class="cart-summary-value">¬•117,000</div>
                        </div>
                        <div class="cart-summary-actions">
                            <button class="btn btn-primary btn-block">Ê≥®Êñá„Åô„Çã</button>
                            <a href="products/product_list.html" class="btn btn-outline-secondary btn-block mt-2">„Ç∑„Éß„ÉÉ„Éî„É≥„Ç∞„ÇíÁ∂ö„Åë„Çã</a>
                        </div>
                    </div>
                    
                    <div class="cart-recommendations">
                        <h3 class="recommendations-title">„Åä„Åô„Åô„ÇÅ„ÉØ„Ç§„É≥</h3>
                        <div class="recommendations-items">
                            <div class="recommendation-item">
                                <div class="wine-color-tag sparkling"></div>
                                <div class="wine-bottle-placeholder">
                                    <div class="wine-bottle sparkling">
                                        <div class="wine-label-text">„Éó„É≠„Çª„ÉÉ„Ç≥</div>
                                    </div>
                                </div>
                                <div class="recommendation-info">
                                    <div class="recommendation-name">„Éó„É≠„Çª„ÉÉ„Ç≥</div>
                                    <div class="recommendation-price">¬•6,000</div>
                                    <button class="btn btn-sm btn-outline-primary">„Ç´„Éº„Éà„Å´ËøΩÂä†</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    

    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Êï∞Èáè„ÅÆÂ¢óÊ∏õ„Éú„Çø„É≥
            const decrementBtns = document.querySelectorAll('.cart-quantity-btn.decrement');
            const incrementBtns = document.querySelectorAll('.cart-quantity-btn.increment');
            
            decrementBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const input = this.nextElementSibling;
                    let value = parseInt(input.value);
                    if (value > 1) {
                        input.value = value - 1;
                        updateCartRow(input);
                    }
                });
            });
            
            incrementBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const input = this.previousElementSibling;
                    let value = parseInt(input.value);
                    if (value < 99) {
                        input.value = value + 1;
                        updateCartRow(input);
                    }
                });
            });
            
            // Êï∞ÈáèÂ§âÊõ¥ÊôÇ„ÅÆÊõ¥Êñ∞
            const quantityInputs = document.querySelectorAll('.cart-quantity-input');
            quantityInputs.forEach(input => {
                input.addEventListener('change', function() {
                    let value = parseInt(this.value);
                    if (isNaN(value) || value < 1) {
                        this.value = 1;
                        value = 1;
                    } else if (value > 99) {
                        this.value = 99;
                        value = 99;
                    }
                    updateCartRow(this);
                });
            });
            
            // ÂâäÈô§„Éú„Çø„É≥
            const removeBtns = document.querySelectorAll('.cart-remove-btn');
            removeBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const row = this.closest('.cart-row');
                    row.remove();
                    updateCartTotal();
                });
            });
            
            // „Åä„Åô„Åô„ÇÅÂïÜÂìÅ„ÅÆ„Ç´„Éº„ÉàËøΩÂä†„Éú„Çø„É≥
            const addToCartBtns = document.querySelectorAll('.recommendations-items .btn');
            addToCartBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const item = this.closest('.recommendation-item');
                    const name = item.querySelector('.recommendation-name').textContent;
                    alert(`${name}„Çí„Ç´„Éº„Éà„Å´ËøΩÂä†„Åó„Åæ„Åó„ÅüÔºà„É¢„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó„ÅÆ„Åü„ÇÅÂÆüÈöõ„Å´„ÅØÂèçÊò†„Åï„Çå„Åæ„Åõ„ÇìÔºâ`);
                });
            });
            
            // Ê≥®Êñá„Éú„Çø„É≥
            const orderBtn = document.querySelector('.cart-summary-actions .btn-primary');
            if (orderBtn) {
                orderBtn.addEventListener('click', function() {
                    alert('Ê≥®ÊñáÂá¶ÁêÜ„ÇíË°å„ÅÑ„Åæ„ÅôÔºà„É¢„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó„ÅÆ„Åü„ÇÅÂÆüÈöõ„Å´„ÅØÂá¶ÁêÜ„Åï„Çå„Åæ„Åõ„ÇìÔºâ');
                });
            }
            
            // „Ç´„Éº„ÉàË°å„ÅÆÊõ¥Êñ∞
            function updateCartRow(input) {
                const row = input.closest('.cart-row');
                const price = parseFloat(row.querySelector('.cart-price').textContent.replace('¬•', '').replace(',', ''));
                const quantity = parseInt(input.value);
                const subtotal = price * quantity;
                
                row.querySelector('.cart-subtotal').textContent = '¬•' + subtotal.toLocaleString();
                
                updateCartTotal();
            }
            
            // „Ç´„Éº„ÉàÂêàË®à„ÅÆÊõ¥Êñ∞
            function updateCartTotal() {
                const subtotals = document.querySelectorAll('.cart-subtotal');
                let total = 0;
                
                subtotals.forEach(el => {
                    total += parseFloat(el.textContent.replace('¬•', '').replace(',', ''));
                });
                
                document.querySelector('.cart-summary-row:first-of-type .cart-summary-value').textContent = '¬•' + total.toLocaleString();
                document.querySelector('.cart-summary-total .cart-summary-value').textContent = '¬•' + total.toLocaleString();
            }
        });
    </script>
    
    <style>
        /* „Ç´„Éº„Éà„Éö„Éº„Ç∏Â∞ÇÁî®„ÅÆ„Çπ„Çø„Ç§„É´ */
        .cart-container {
            display: flex;
            gap: var(--spacing-xl);
            margin-bottom: var(--spacing-xl);
        }
        
        .cart-items {
            flex: 2;
        }
        
        .cart-summary {
            flex: 1;
        }
        
        /* „Ç´„Éº„Éà„ÉÜ„Éº„Éñ„É´ */
        .cart-table {
            width: 100%;
            margin-bottom: var(--spacing-lg);
        }
        
        .cart-product {
            display: flex;
            align-items: center;
        }
        
        .wine-color-tag {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: var(--spacing-xs);
            flex-shrink: 0;
        }
        
        .wine-color-tag.red {
            background-color: #8B0000;
        }
        
        .wine-color-tag.white {
            background-color: #F0E68C;
        }
        
        .wine-color-tag.rose {
            background-color: #FFB6C1;
        }
        
        .wine-color-tag.sparkling {
            background-color: #F5F5DC;
            border: 1px solid #D4AF37;
        }
        
        /* „ÉØ„Ç§„É≥„Éú„Éà„É´Ë°®Á§∫ÔºàÂïÜÂìÅ‰∏ÄË¶ß„Å®Áµ±‰∏ÄÔºâ */
        .wine-bottle-placeholder {
            width: 40px;
            height: 60px;
            margin-right: var(--spacing-sm);
            flex-shrink: 0;
        }
        
        .wine-bottle {
            width: 100%;
            height: 100%;
            border-radius: 8px 8px 4px 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }
        
        .wine-bottle.red {
            background: linear-gradient(135deg, #8B0000, #A0522D);
            color: #FFD700;
        }
        
        .wine-bottle.white {
            background: linear-gradient(135deg, #F0E68C, #FFFACD);
            color: #4B0082;
        }
        
        .wine-bottle.sparkling {
            background: linear-gradient(135deg, #F5F5DC, #FFE4B5);
            color: #8B4513;
            border: 1px solid #D4AF37;
        }
        
        .wine-bottle.rose {
            background: linear-gradient(135deg, #FFB6C1, #FFC0CB);
            color: #8B008B;
        }
        
        .wine-label-text {
            font-size: 8px;
            font-weight: bold;
            text-align: center;
            line-height: 1.1;
            padding: 2px;
        }
        
        .cart-product-name {
            font-weight: bold;
            margin-bottom: 2px;
        }
        
        .cart-product-meta {
            font-size: var(--font-size-sm);
            color: #6c757d;
        }
        
        .cart-price, .cart-subtotal {
            font-weight: bold;
        }
        
        /* Êï∞Èáè„Ç≥„É≥„Éà„É≠„Éº„É´ */
        .cart-quantity {
            display: flex;
            align-items: center;
            max-width: 120px;
        }
        
        .cart-quantity-input {
            width: 40px;
            text-align: center;
            border: 1px solid var(--medium-gray);
            border-radius: 0;
            height: 32px;
        }
        
        .cart-quantity-btn {
            width: 32px;
            height: 32px;
            background: var(--light-gray);
            border: 1px solid var(--medium-gray);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-weight: bold;
        }
        
        .cart-quantity-btn.decrement {
            border-radius: var(--border-radius-sm) 0 0 var(--border-radius-sm);
        }
        
        .cart-quantity-btn.increment {
            border-radius: 0 var(--border-radius-sm) var(--border-radius-sm) 0;
        }
        
        /* ÂâäÈô§„Éú„Çø„É≥ */
        .cart-remove-btn {
            background: none;
            border: none;
            color: #dc3545;
            font-size: 1.5rem;
            cursor: pointer;
            transition: color var(--transition-fast);
        }
        
        .cart-remove-btn:hover {
            color: #bd2130;
        }
        
        /* Ê≥®Êñá„Çµ„Éû„É™„Éº */
        .cart-summary-card {
            background-color: var(--white);
            border-radius: var(--border-radius-md);
            box-shadow: var(--shadow-sm);
            padding: var(--spacing-lg);
            margin-bottom: var(--spacing-lg);
        }
        
        .cart-summary-title {
            margin-bottom: var(--spacing-md);
            color: var(--dark-gray);
            font-size: var(--font-size-lg);
            padding-bottom: var(--spacing-sm);
            border-bottom: 1px solid var(--medium-gray);
        }
        
        .cart-summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: var(--spacing-sm);
        }
        
        .cart-summary-total {
            margin-top: var(--spacing-md);
            padding-top: var(--spacing-sm);
            border-top: 1px solid var(--medium-gray);
            font-weight: bold;
            font-size: var(--font-size-lg);
        }
        
        .cart-summary-actions {
            margin-top: var(--spacing-lg);
        }
        
        /* „Åä„Åô„Åô„ÇÅÂïÜÂìÅ */
        .cart-recommendations {
            background-color: var(--white);
            border-radius: var(--border-radius-md);
            box-shadow: var(--shadow-sm);
            padding: var(--spacing-lg);
        }
        
        .recommendations-title {
            margin-bottom: var(--spacing-md);
            color: var(--dark-gray);
            font-size: var(--font-size-lg);
        }
        
        .recommendation-item {
            display: flex;
            align-items: center;
            margin-bottom: var(--spacing-md);
            padding-bottom: var(--spacing-md);
            border-bottom: 1px solid var(--light-gray);
        }
        
        .recommendation-item:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }
        
        .recommendation-info {
            flex: 1;
            margin-left: var(--spacing-sm);
        }
        
        .recommendation-name {
            font-weight: bold;
            margin-bottom: 2px;
        }
        
        .recommendation-price {
            font-size: var(--font-size-md);
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: var(--spacing-xs);
        }
        
        /* „É¶„Éº„ÉÜ„Ç£„É™„ÉÜ„Ç£„ÇØ„É©„Çπ */
        .mt-2 {
            margin-top: var(--spacing-sm);
        }
        
        /* „É¨„Çπ„Éù„É≥„Ç∑„ÉñÂØæÂøú */
        @media (max-width: 992px) {
            .cart-container {
                flex-direction: column;
            }
            
            .cart-summary {
                display: flex;
                gap: var(--spacing-lg);
            }
            
            .cart-summary-card, .cart-recommendations {
                flex: 1;
            }
        }
        
        @media (max-width: 768px) {
            .cart-summary {
                flex-direction: column;
            }
            
            .cart-table thead {
                display: none;
            }
            
            .cart-table, .cart-table tbody, .cart-table tr, .cart-table td {
                display: block;
                width: 100%;
            }
            
            .cart-row {
                margin-bottom: var(--spacing-md);
                padding-bottom: var(--spacing-md);
                border-bottom: 1px solid var(--medium-gray);
            }
            
            .cart-row td {
                padding: var(--spacing-xs) 0;
                text-align: right;
                position: relative;
                padding-left: 50%;
            }
            
            .cart-row td:before {
                content: attr(data-label);
                position: absolute;
                left: 0;
                width: 45%;
                text-align: left;
                font-weight: bold;
            }
            
            .cart-product {
                justify-content: flex-end;
            }
        }
    </style>
</body>
</html>