<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŸºæœ¬ãƒ†ã‚¹ãƒˆ | ãƒ¯ã‚¤ã‚µãƒ</title>
    <style>
        body { 
            margin: 0; 
            font-family: Arial, sans-serif; 
            background: #f0f0f0;
        }
        .test-header {
            background: red;
            color: white;
            padding: 1rem;
            text-align: center;
            font-size: 2rem;
            font-weight: bold;
        }
        .debug-info {
            background: white;
            padding: 2rem;
            margin: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .debug-item {
            margin: 1rem 0;
            padding: 0.5rem;
            background: #f8f9fa;
            border-left: 4px solid #007bff;
        }
    </style>
</head>
<body>
    <!-- æœ€ã‚‚ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ˜ãƒƒãƒ€ãƒ¼ãƒ†ã‚¹ãƒˆ -->
    <div class="test-header">
        ğŸš¨ ã“ã‚ŒãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚Œã°HTMLã¯æ­£å¸¸ã«èª­ã¿è¾¼ã¾ã‚Œã¦ã„ã¾ã™
    </div>

    <div class="debug-info">
        <h1>ğŸ”§ åŸºæœ¬ãƒ‡ãƒãƒƒã‚°æƒ…å ±</h1>
        
        <div class="debug-item">
            <strong>ç¾åœ¨æ™‚åˆ»:</strong> <span id="current-time"></span>
        </div>
        
        <div class="debug-item">
            <strong>ãƒšãƒ¼ã‚¸URL:</strong> <span id="page-url"></span>
        </div>
        
        <div class="debug-item">
            <strong>ãƒ•ã‚¡ã‚¤ãƒ«ãƒ—ãƒ­ãƒˆã‚³ãƒ«:</strong> <span id="file-protocol"></span>
        </div>
        
        <div class="debug-item">
            <strong>ãƒ–ãƒ©ã‚¦ã‚¶:</strong> <span id="browser-info"></span>
        </div>
        
        <div class="debug-item">
            <strong>JavaScriptå‹•ä½œ:</strong> <span id="js-working">JavaScriptç„¡åŠ¹</span>
        </div>
        
        <div class="debug-item">
            <strong>ãƒ•ã‚¡ã‚¤ãƒ«å­˜åœ¨ç¢ºèª:</strong>
            <div id="file-check-results"></div>
        </div>
    </div>

    <div class="debug-info">
        <h2>ğŸ“ ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ ç¢ºèª</h2>
        <p>ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã™ã‚‹ã‹ç¢ºèªä¸­...</p>
        <div id="file-structure"></div>
    </div>

    <script>
        // JavaScriptå‹•ä½œç¢ºèª
        document.getElementById('js-working').textContent = 'JavaScriptæ­£å¸¸å‹•ä½œ';
        document.getElementById('js-working').style.color = 'green';
        
        // åŸºæœ¬æƒ…å ±è¡¨ç¤º
        document.getElementById('current-time').textContent = new Date().toLocaleString();
        document.getElementById('page-url').textContent = window.location.href;
        document.getElementById('file-protocol').textContent = window.location.protocol;
        document.getElementById('browser-info').textContent = navigator.userAgent.split(' ')[0];
        
        // ãƒ•ã‚¡ã‚¤ãƒ«å­˜åœ¨ç¢ºèª
        const filesToCheck = [
            '../assets/images/winesupport_logo.png',
            '../sommia.png',
            '../js/common_parts.js',
            '../css/style.css',
            'assets/images/winesupport_logo.png',
            'sommia.png',
            'js/common_parts.js',
            'css/style.css'
        ];
        
        const fileCheckResults = document.getElementById('file-check-results');
        
        function checkFileExists(url) {
            return new Promise((resolve) => {
                const img = new Image();
                const xhr = new XMLHttpRequest();
                
                if (url.includes('.png') || url.includes('.jpg')) {
                    // ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒã‚§ãƒƒã‚¯
                    img.onload = () => resolve(true);
                    img.onerror = () => resolve(false);
                    img.src = url;
                } else {
                    // ãã®ä»–ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒã‚§ãƒƒã‚¯
                    xhr.open('HEAD', url, true);
                    xhr.onreadystatechange = () => {
                        if (xhr.readyState === 4) {
                            resolve(xhr.status === 200);
                        }
                    };
                    xhr.onerror = () => resolve(false);
                    try {
                        xhr.send();
                    } catch (e) {
                        resolve(false);
                    }
                }
            });
        }
        
        // ãƒ•ã‚¡ã‚¤ãƒ«å­˜åœ¨ç¢ºèªã‚’å®Ÿè¡Œ
        async function checkAllFiles() {
            fileCheckResults.innerHTML = '<p>ãƒ•ã‚¡ã‚¤ãƒ«ç¢ºèªä¸­...</p>';
            const results = [];
            
            for (const file of filesToCheck) {
                try {
                    const exists = await checkFileExists(file);
                    results.push(`${exists ? 'âœ…' : 'âŒ'} ${file}`);
                } catch (e) {
                    results.push(`âŒ ${file} (ã‚¨ãƒ©ãƒ¼: ${e.message})`);
                }
            }
            
            fileCheckResults.innerHTML = results.map(result => 
                `<div style="margin: 0.5rem 0; font-family: monospace;">${result}</div>`
            ).join('');
        }
        
        // ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ è¡¨ç¤º
        const fileStructure = document.getElementById('file-structure');
        const expectedStructure = `
æœŸå¾…ã•ã‚Œã‚‹ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ :
ğŸ“ 250522_wine-support_mockup/
â”œâ”€â”€ ğŸ“„ test_simple_header.html (ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«)
â”œâ”€â”€ ğŸ“ assets/
â”‚   â””â”€â”€ ğŸ“ images/
â”‚       â””â”€â”€ ğŸ–¼ï¸ winesupport_logo.png
â”œâ”€â”€ ğŸ“ js/
â”‚   â””â”€â”€ ğŸ“„ common_parts.js
â”œâ”€â”€ ğŸ“ css/
â”‚   â””â”€â”€ ğŸ“„ style.css
â””â”€â”€ ğŸ–¼ï¸ sommia.png
        `;
        
        fileStructure.innerHTML = `<pre style="background: #f8f9fa; padding: 1rem; border-radius: 4px; overflow-x: auto;">${expectedStructure}</pre>`;
        
        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿å®Œäº†å¾Œã«ãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚§ãƒƒã‚¯å®Ÿè¡Œ
        setTimeout(() => {
            checkAllFiles();
        }, 1000);
        
        // ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãƒ­ã‚°
        console.log('ğŸš¨ åŸºæœ¬ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸ãŒèª­ã¿è¾¼ã¾ã‚Œã¾ã—ãŸ');
        console.log('ğŸ“ ç¾åœ¨ã®URL:', window.location.href);
        console.log('ğŸ“ ãƒ—ãƒ­ãƒˆã‚³ãƒ«:', window.location.protocol);
        console.log('ğŸŒ ãƒ›ã‚¹ãƒˆ:', window.location.hostname);
        console.log('ğŸ“„ ãƒ‘ã‚¹:', window.location.pathname);
    </script>
</body>
</html>
